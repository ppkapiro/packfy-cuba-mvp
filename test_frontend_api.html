<!DOCTYPE html>
<html>
  <head>
    <title>Test Frontend API</title>
  </head>
  <body>
    <h1>Test Frontend API</h1>
    <div id="results"></div>

    <script>
      async function testAPI() {
        const results = document.getElementById("results");

        try {
          // Test 1: Health check
          results.innerHTML += "<h3>1. Test Health Check</h3>";
          const healthResponse = await fetch("/api/health/");
          const healthData = await healthResponse.json();
          results.innerHTML += `<p>Health: ${JSON.stringify(healthData)}</p>`;

          // Test 2: Login sin tenant
          results.innerHTML += "<h3>2. Test Login sin tenant</h3>";
          const loginResponse1 = await fetch("/api/auth/login/", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              email: "superadmin@packfy.com",
              password: "super123!",
            }),
          });
          results.innerHTML += `<p>Login sin tenant Status: ${loginResponse1.status}</p>`;
          const loginData1 = await loginResponse1.json();
          results.innerHTML += `<p>Login sin tenant Data: ${JSON.stringify(
            loginData1
          )}</p>`;

          // Test 3: Login con tenant
          results.innerHTML += "<h3>3. Test Login con tenant</h3>";
          const loginResponse2 = await fetch("/api/auth/login/", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "X-Tenant-Slug": "packfy-express",
            },
            body: JSON.stringify({
              email: "superadmin@packfy.com",
              password: "super123!",
            }),
          });
          results.innerHTML += `<p>Login con tenant Status: ${loginResponse2.status}</p>`;
          const loginData2 = await loginResponse2.json();
          results.innerHTML += `<p>Login con tenant Data: ${JSON.stringify(
            loginData2
          )}</p>`;
        } catch (error) {
          results.innerHTML += `<p>Error: ${error.message}</p>`;
        }
      }

      // Ejecutar test al cargar
      testAPI();
    </script>
  </body>
</html>
