Empresa no encontrada con slug: empresa-inexistente
Empresa no encontrada con slug: any-tenant
Not Found: /api/auth/login/
Unauthorized: /api/auth/login/
ğŸ§ª INICIANDO PRUEBAS AUTOMATIZADAS LOGIN MULTITENANCY
================================================================================

ğŸ§ª TEST 1: AUTENTICACIÃ“N BÃSICA
--------------------------------------------------
   âœ… Auth admin@packfy.com: AutenticaciÃ³n exitosa
      ğŸ“Š user_id: 61
      ğŸ“Š is_active: True
   âœ… Auth dueno@packfy.com: AutenticaciÃ³n exitosa
      ğŸ“Š user_id: 52
      ğŸ“Š is_active: True
   âœ… Auth consultor@packfy.com: AutenticaciÃ³n exitosa
      ğŸ“Š user_id: 64
      ğŸ“Š is_active: True
   âœ… Auth demo@packfy.com: AutenticaciÃ³n exitosa
      ğŸ“Š user_id: 65
      ğŸ“Š is_active: True
   âœ… Auth miami@packfy.com: AutenticaciÃ³n exitosa
      ğŸ“Š user_id: 53
      ğŸ“Š is_active: True
   âœ… Auth cuba@packfy.com: AutenticaciÃ³n exitosa
      ğŸ“Š user_id: 54
      ğŸ“Š is_active: True
   âœ… Auth fake@user.com: AutenticaciÃ³n rechazada correctamente

ğŸ§ª TEST 2: MIDDLEWARE TENANT
--------------------------------------------------
   âœ… Middleware packfy-express.localhost:5173: Tenant detectado correctamente: packfy-express
      ğŸ“Š expected: packfy-express
      ğŸ“Š actual: packfy-express
   âœ… Middleware cuba-express.localhost:5173: Tenant detectado correctamente: cuba-express
      ğŸ“Š expected: cuba-express
      ğŸ“Š actual: cuba-express
   âœ… Middleware habana-premium.localhost:5173: Tenant detectado correctamente: habana-premium
      ğŸ“Š expected: habana-premium
      ğŸ“Š actual: habana-premium
   âœ… Middleware miami-shipping.localhost:5173: Tenant detectado correctamente: miami-shipping
      ğŸ“Š expected: miami-shipping
      ğŸ“Š actual: miami-shipping
   âœ… Middleware empresa-inexistente.localhost:5173: Tenant detectado correctamente: None
      ğŸ“Š expected: None
      ğŸ“Š actual: None
   âœ… Middleware localhost:5173: Tenant detectado correctamente: None
      ğŸ“Š expected: None
      ğŸ“Š actual: None

ğŸ§ª TEST 3: API LOGIN CON TENANT
--------------------------------------------------
ğŸš€ MIDDLEWARE process_request para /api/auth/login/
ğŸŒ HOST: testserver
ğŸ¢ SUBDOMAIN SLUG: None
ğŸ” HEADER TENANT SLUG: packfy-express
âœ… EMPRESA POR HEADER: Packfy Express
ğŸ¯ MIDDLEWARE process_view para /api/auth/login/
ğŸ” USER EN PROCESS_VIEW: AnonymousUser
   âœ… API Login dueno@packfy.com@packfy-express: Respuesta correcta: 200
      ğŸ“Š expected_pass: True
      ğŸ“Š actual_status: 200
ğŸš€ MIDDLEWARE process_request para /api/auth/login/
ğŸŒ HOST: testserver
ğŸ¢ SUBDOMAIN SLUG: None
ğŸ” HEADER TENANT SLUG: cuba-express
âœ… EMPRESA POR HEADER: Cuba Express Cargo
ğŸ¯ MIDDLEWARE process_view para /api/auth/login/
ğŸ” USER EN PROCESS_VIEW: AnonymousUser
   âœ… API Login consultor@packfy.com@cuba-express: Respuesta correcta: 200
      ğŸ“Š expected_pass: True
      ğŸ“Š actual_status: 200
ğŸš€ MIDDLEWARE process_request para /api/auth/login/
ğŸŒ HOST: testserver
ğŸ¢ SUBDOMAIN SLUG: None
ğŸ” HEADER TENANT SLUG: any-tenant
   âŒ API Login admin@packfy.com@any-tenant: Respuesta incorrecta: 404
      ğŸ“Š expected_pass: True
      ğŸ“Š actual_status: 404
ğŸš€ MIDDLEWARE process_request para /api/auth/login/
ğŸŒ HOST: testserver
ğŸ¢ SUBDOMAIN SLUG: None
ğŸ” HEADER TENANT SLUG: packfy-express
âœ… EMPRESA POR HEADER: Packfy Express
ğŸ¯ MIDDLEWARE process_view para /api/auth/login/
ğŸ” USER EN PROCESS_VIEW: AnonymousUser
   âœ… API Login dueno@packfy.com@packfy-express: Respuesta correcta: 401
      ğŸ“Š expected_pass: False
      ğŸ“Š actual_status: 401

ğŸ§ª TEST 4: ACCESO USUARIO-EMPRESA
--------------------------------------------------
   âœ… Acceso dueno@packfy.com â†’ packfy-express: Acceso permitido correctamente
      ğŸ“Š has_access: True
      ğŸ“Š expected: True
   âœ… Acceso dueno@packfy.com â†’ cuba-express: Acceso denegado correctamente
      ğŸ“Š has_access: False
      ğŸ“Š expected: False
   âœ… Acceso consultor@packfy.com â†’ packfy-express: Acceso permitido correctamente
      ğŸ“Š has_access: True
      ğŸ“Š expected: True
   âœ… Acceso consultor@packfy.com â†’ cuba-express: Acceso permitido correctamente
      ğŸ“Š has_access: True
      ğŸ“Š expected: True
   âœ… Acceso demo@packfy.com â†’ miami-shipping: Acceso permitido correctamente
      ğŸ“Š has_access: True
      ğŸ“Š expected: True

ğŸ§ª TEST 5: USUARIOS MULTI-EMPRESA
--------------------------------------------------
   âœ… Multi-empresa consultor@packfy.com: Usuario con acceso a 4 empresas
      ğŸ“Š empresas_count: 4
      ğŸ“Š empresas: ['Cuba Express Cargo', 'Habana Premium Logistics', 'Miami Shipping Express', 'Packfy Express']
   âœ… Multi-empresa demo@packfy.com: Usuario con acceso a 4 empresas
      ğŸ“Š empresas_count: 4
      ğŸ“Š empresas: ['Cuba Express Cargo', 'Habana Premium Logistics', 'Miami Shipping Express', 'Packfy Express']

ğŸ§ª TEST 6: CREDENCIALES FRONTEND
--------------------------------------------------
   âœ… Frontend superadmin: Credencial vÃ¡lida: admin@packfy.com
      ğŸ“Š password: admin123
      ğŸ“Š user_type: superadmin
   âœ… Frontend owner: Credencial vÃ¡lida: dueno@packfy.com
      ğŸ“Š password: password123
      ğŸ“Š user_type: owner
   âœ… Frontend multi-enterprise: Credencial vÃ¡lida: consultor@packfy.com
      ğŸ“Š password: password123
      ğŸ“Š user_type: multi-enterprise
   âœ… Frontend demo: Credencial vÃ¡lida: demo@packfy.com
      ğŸ“Š password: demo123
      ğŸ“Š user_type: demo
   âœ… Frontend operator: Credencial vÃ¡lida: miami@packfy.com
      ğŸ“Š password: password123
      ğŸ“Š user_type: operator
   âœ… Frontend operator: Credencial vÃ¡lida: cuba@packfy.com
      ğŸ“Š password: password123
      ğŸ“Š user_type: operator

ğŸ“± CONFIGURACIÃ“N PARA FRONTEND:
--------------------------------------------------
   ğŸ“‹ ConfiguraciÃ³n generada para LoginPage.tsx:
   {
  "api_base_url": "http://localhost:8000/api",
  "tenant_header": "X-Tenant-Slug",
  "test_credentials": [
    {
      "label": "ğŸ‘‘ Superadmin",
      "email": "admin@packfy.com",
      "password": "admin123",
      "description": "Acceso total al sistema"
    },
    {
      "label": "ğŸ¢ DueÃ±o Principal",
      "email": "dueno@packfy.com",
      "password": "password123",
      "description": "Solo Packfy Express"
    },
    {
      "label": "ğŸŒ Multi-empresa",
      "email": "consultor@packfy.com",
      "password": "password123",
      "description": "Todas las empresas"
    },
    {
      "label": "ğŸ§ª Demo",
      "email": "demo@packfy.com",
      "password": "demo123",
      "description": "Usuario de demostraciÃ³n"
    }
  ],
  "tenant_urls": {
    "cuba-express": {
      "local": "http://cuba-express.localhost:5173",
      "production": "https://cuba-express.packfy.com"
    },
    "habana-premium": {
      "local": "http://habana-premium.localhost:5173",
      "production": "https://habana-premium.packfy.com"
    },
    "miami-shipping": {
      "local": "http://miami-shipping.localhost:5173",
      "production": "https://miami-shipping.packfy.com"
    },
    "packfy-express": {
      "local": "http://packfy-express.localhost:5173",
      "production": "https://packfy-express.packfy.com"
    }
  }
}

ğŸ“Š RESUMEN DE PRUEBAS:
--------------------------------------------------
   âœ… Pruebas exitosas: 29
   âŒ Pruebas fallidas: 1
   ğŸ“ˆ Tasa de Ã©xito: 96.7%

âš ï¸ Algunas pruebas fallaron, revisar resultados arriba

================================================================================
ğŸ¯ PRUEBAS COMPLETADAS
   Sistema de login multitenancy validado completamente
================================================================================
